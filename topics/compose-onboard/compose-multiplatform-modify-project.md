[//]: # (title: Modify the project)
<microformat>
   <p>This is the fourth part of the <strong>Getting started with Compose Multiplatform</strong> tutorial. Before proceeding, make sure you've completed previous steps.</p>
   <p><img src="icon-1-done.svg" width="20" alt="First step"/> <a href="compose-multiplatform-setup.md">Set up an environment</a><br/>
       <img src="icon-2-done.svg" width="20" alt="Second step"/> <a href="compose-multiplatform-create-first-app.md">Create your multiplatform project</a><br/>
       <img src="icon-3-done.svg" width="20" alt="Third step"/> <a href="compose-multiplatform-explore-composables.md">Explore composable code</a><br/>
       <img src="icon-4.svg" width="20" alt="Fourth step"/> <strong>Modify the project</strong><br/>
      <img src="icon-5-todo.svg" width="20" alt="Fifth step"/> Create your own application<br/>
  </p>
</microformat>

Let's modify the code generated by the Kotlin Multiplatform wizard and display the current date within the `App`
composable. To do this, you'll add a new dependency to the project, enhance the UI, and rerun the application on each
platform.

## Add new dependency

You could retrieve the date using platform-specific libraries
and [expected and actual declarations](https://kotlinlang.org/docs/multiplatform-expect-actual.html). But we recommend that you use this approach only
when there's no Kotlin Multiplatform library available. In this case, you can rely on
the [kotlinx-datetime](https://github.com/Kotlin/kotlinx-datetime) library.

To use this library:

1. Open the `composeApp/build.gradle.kts` file and add it as a dependency to the project.

   ```kotlin
   val commonMain by getting {
       dependencies {
           implementation(compose.runtime)
           implementation(compose.foundation)
           implementation(compose.material)
           @OptIn(ExperimentalComposeLibrary::class)
           implementation(compose.components.resources)
  
           implementation("org.jetbrains.kotlinx:kotlinx-datetime:%dateTimeVersion%")
       }
   }
   ```

   * The dependency is added to the section that configures the common code source set. With a multiplatform library, you
     don't need to modify platform-specific source sets.
   * For simplicity, the version number is included directly instead of adding it to the version catalog.

2. Once the dependency is added, you're prompted to resync the project. Click **Sync Now** to synchronize Gradle files:

   ![Synchronize Gradle files](gradle-sync.png)

## Enhance user interface

1. Open the `App.kt` file and add the following function:

   ```kotlin
   fun todaysDate(): String {
       fun LocalDateTime.format() = toString().substringBefore('T')

       val now = Clock.System.now()
       val zone = TimeZone.currentSystemDefault()
       return now.toLocalDateTime(zone).format()
   }
   ```
  
   It builds a string containing the current date.

2. Modify the `App` composable to include the `Text` composable that invokes this function and displays the result:

   ```kotlin
   @OptIn(ExperimentalResourceApi::class)
   @Composable
   fun App() {
       MaterialTheme {
           var greetingText by remember { mutableStateOf(GREETING) }
           var showImage by remember { mutableStateOf(false) }
           Column(Modifier.fillMaxWidth(), horizontalAlignment = Alignment.CenterHorizontally) {
               Text(
                   text = "Today's date is ${todaysDate()}",
                   modifier = Modifier.padding(20.dp),
                   fontSize = 24.sp,
                   textAlign = TextAlign.Center
               )
               Button(onClick = {
                   greetingText = "${getPlatformName()}: $GREETING"
                   showImage = !showImage
               }) {
                   Text(greetingText)
               }
               AnimatedVisibility(showImage) {
                   Image(
                       painterResource("compose-multiplatform.xml"),
                       null
                   )
               }
           }
       }
   }
   ```

3. Follow IDE's suggestions to import missing dependencies.

## Rerun the application

You can now rerun the application using the same run configurations for Android, iOS,
and desktop:

![First Compose Multiplatform app on Android and iOS](first-compose-project-on-android-ios-2.png){width=500}

![First Compose Multiplatform app on desktop](first-compose-project-on-desktop-2.png){width=400}

## Next step

In the next part of the tutorial, you'll learn new Compose Multiplatform concepts and create your own application from
scratch.

**[Proceed to the next part](compose-multiplatform-new-project.md)**

## Get help

* **Kotlin Slack**. Get an [invite](https://surveys.jetbrains.com/s3/kotlin-slack-sign-up) and join
  the [#multiplatform](https://kotlinlang.slack.com/archives/C3PQML5NU) channel.
* **Kotlin issue tracker**. [Report a new issue](https://youtrack.jetbrains.com/newIssue?project=KT).
